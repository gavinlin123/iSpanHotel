<!DOCTYPE html>
<html class="no-js" lang="">

<head>
  <meta charset="utf-8" />
  <meta http-equiv="x-ua-compatible" content="ie=edge" />
  <title>iRelax Hotel | 忘記密碼</title>
  <meta name="description" content="" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="login_static/css/bootstrap.min.css" />
  <!-- Fontawesome CSS -->
  <link rel="stylesheet" href="login_static/css/fontawesome-all.min.css" />
  <!-- Flaticon CSS -->
  <link rel="stylesheet" href="login_static/css/flaticon.css" />
  <!-- Google Web Fonts -->
  <link href="login_static/css/css.css" rel="stylesheet" />
  <!-- Custom CSS -->
  <link rel="stylesheet" href="login_static/css/style.css" />
  <style>
    div.loadingdiv {
      height: 100%;
      width: 100%;
      position: fixed;
      z-index: 99999;
      top: 0;
      left: 0;
      display: block;
      background: #ffffff;
      opacity: 0.7;
      text-align: center;
    }

    div.loadingdiv img {
      position: relative;
      vertical-align: middle;
      text-align: center;
      margin: 0 auto;
      margin-top: 20vh;
    }
  </style>
</head>

<body>
  <!--[if lt IE 8]>
      <p class="browserupgrade">
        You are using an
        <strong>outdated</strong>
        browser. Please
        <a href="http://browsehappy.com/">upgrade your browser</a>
        to improve your experience.
      </p>
    <![endif]-->
  <div class="loadingdiv" id="loading" style="display: none">
    <img src="../images/loading/loading.gif" />
  </div>
  <div id="preloader" class="preloader">
    <div class="inner">
      <div class="line1"></div>
      <div class="line2"></div>
      <div class="line3"></div>
    </div>
  </div>
  <section class="fxt-template-animation fxt-template-layout24" data-bg-image="img/figure/bg24-l.jpg">
    <!-- Video Area Start Here -->
    <div class="fxt-video-background">
      <div class="fxt-video">
        <div id="fxtVideo" data-property="{
                    videoURL:'vCI2kmFJD_w', 
                    autoPlay:true, 
                    mute:true, 
                    loop:true, 
                    startAt:0, 
                    opacity:1, 
                    quality:'default', 
                    showControls:false, 
                    optimizeDisplay:true,
                    containment:'.fxt-video-background'
                }"></div>
      </div>
    </div>
    <!-- Video Area Start Here -->
    <div class="container">
      <div class="row align-items-center justify-content-center">
        <div class="col-lg-3">
          <div class="fxt-header">
            <a href="../index.html" class="fxt-logo">
              <img src="login_static/picture/logo-9.png" alt="Logo" />
            </a>
          </div>
        </div>
        <div class="col-lg-6">
          <div class="fxt-content">
            <h2>忘記密碼</h2>
            <div class="fxt-form">
              <form id="email_submit" action="" method="">
                <div class="form-group">
                  <div class="fxt-transformY-50 fxt-transition-delay-1">
                    <input type="email" id="email" class="form-control" name="email" placeholder="請輸入 Email"
                      required="required" />
                  </div>
                </div>
                <div class="form-group">
                  <div class="fxt-transformY-50 fxt-transition-delay-4">
                    <button id="submit_email" style="color: black;" type="submit" class="fxt-btn-fill">
                      送出
                    </button>
                  </div>
                </div>
              </form>
            </div>
            <div class="fxt-footer">
              <div class="fxt-transformY-50 fxt-transition-delay-9">
                <p>
                  沒有帳號嗎?
                  <a href="register.html" class="switcher-text2 inline-text">
                    註冊
                  </a>
                </p>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </section>
  <!-- jquery-->
  <script src="login_static/js/jquery-3.5.0.min.js"></script>
  <!-- Bootstrap js -->
  <script src="login_static/js/bootstrap.min.js"></script>
  <!-- Imagesloaded js -->
  <script src="login_static/js/imagesloaded.pkgd.min.js"></script>
  <!-- YouTube js -->
  <script src="login_static/js/jquery.mb.YTPlayer.min.js"></script>
  <!-- Validator js -->
  <script src="login_static/js/validator.min.js"></script>
  <!-- Custom Js -->
  <script src="login_static/js/main.js"></script>
  <!-- sweet alert -->
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
  <script>
    // $("#submit_email").click(function () {
    //   // e.preventDefault();
    //   console.log("clicked");
    //   var url = "/member/forgot_password";
    //   var email = $("#email").val();
    //   var data = '{"email":"' + email + '"}';
    //   console.log(data);
    //   $.ajax({
    //     type: "POST",
    //     url: url,
    //     data: data,
    //     headers: { 'Content-Type': 'application/json;charset=utf8' },
    //     dataType: "json"
    //   });
    // });
    $("#email_submit").submit((e) => {
      e.preventDefault();
      console.log("clicked");
      var url = "/member/forgot_password";
      var email = $("#email").val();
      var data = '{"account":"' + email + '"}';
      console.log(data);
      $.ajax({
        beforeSend: function () {
          $('#loading').css("display", "");
        },
        type: "POST",
        url: url,
        data: data,
        headers: { "Content-Type": "application/json;charset=utf8" },
        complete: function () {
          $('#loading').css("display", "none");
        }
      }).done(function (msg) {
        if (msg == "iRelax Hotel已將密碼重置信件寄到您的信箱，請至信箱確認，謝謝。") {
          swal.fire('', msg, 'success').then(function () {
            location.href = "../index.html"
          })
        } else {
          swal.fire('', msg, 'error')
        }
      });
    });
  </script>
</body>

</html>